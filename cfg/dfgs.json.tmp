[
    {
        "id": "11257610-1ad1-80ec-0c11-10100c110000",
        "desc": "Pipeline2 Dataflow Graph",
        "graph": [
            {
                "pathname": "/speech_to_text",
                "shard_dispatcher_list": ["one"],
                "user_defined_logic_list": ["6cfe8f64-3a1d-11ed-8e7e-0242ac110006"],
                "user_defined_logic_stateful_list": ["singlethreaded"],
                "user_defined_logic_config_list": [
                    {
                        "python_path":["python_udls"],
                        "module":"speech_to_text_udl",
                        "entry_class":"SpeechToTextUDL",
                        "model_name": "iic/SenseVoiceSmall",
                        "device": "cuda",
                        "max_exe_batch_size":10,
                        "batch_time_us":1000,
                        "max_emit_batch_size":10,
                        "next_udl_shards":[2]
                    }],
                "destinations": [{"/encode":"put"}]
            },
            {
                "pathname": "/encode",
                "shard_dispatcher_list": ["one"],
                "user_defined_logic_list": ["6cfe8f64-3a1d-11ed-8e7e-0242ac110006"],
                "user_defined_logic_stateful_list": ["singlethreaded"],
                "user_defined_logic_config_list": [
                    {
                        "python_path":["python_udls"],
                        "module":"encode_udl",
                        "entry_class":"EncodeUDL",
                        "model_name": "BAAI/bge-small-en-v1.5",
                        "device": "cuda",
                        "max_exe_batch_size":10,
                        "batch_time_us":1000,
                        "max_emit_batch_size":10,
                        "next_udl_shards":[1]
                    }],
                "destinations": [{"/search":"put"}]
            },
            {
                "pathname": "/search",
                "shard_dispatcher_list": ["one"],
                "user_defined_logic_list": ["6cfe8f64-3a1d-11ed-8e7e-0242ac110006"],
                "user_defined_logic_stateful_list": ["singlethreaded"],
                "user_defined_logic_config_list": [
                    {
                        "python_path":["python_udls"],
                        "module":"search_udl",
                        "entry_class":"SearchUDL",
                        "index_dir": "/mnt/nvme0/vortex_pipeline1/ivfpq_1m.index",
                        "device": "cuda",
                        "max_exe_batch_size":10,
                        "batch_time_us":1000,
                        "max_emit_batch_size":10,
                        "next_udl_shards":[1],
                        "emb_dim":384,
                        "topk":5
                    }],
                "destinations": [{"/get_doc":"put"}]
            },
            {
                "pathname": "/get_doc",
                "shard_dispatcher_list": ["one"],
                "user_defined_logic_list": ["6cfe8f64-3a1d-11ed-8e7e-0242ac110006"],
                "user_defined_logic_stateful_list": ["singlethreaded"],
                "user_defined_logic_config_list": [
                    {
                        "python_path":["python_udls"],
                        "module":"doc_udl",
                        "entry_class":"DocUDL",
                        "doc_dir":"/mnt/nvme0/vortex_pipeline1/ms_macro_1m_passages.npy",
                        "max_exe_batch_size":10,
                        "batch_time_us":1000,
                        "max_emit_batch_size":10,
                        "next_udl_shards":[1]
                    }],
                "destinations": [{"/text_check":"put","/lang_det":"put"}]
            },
            {
                "pathname": "/text_check",
                "shard_dispatcher_list": ["one"],
                "user_defined_logic_list": ["6cfe8f64-3a1d-11ed-8e7e-0242ac110006"],
                "user_defined_logic_stateful_list": ["singlethreaded"],
                "user_defined_logic_config_list": [
                    {
                        "python_path":["python_udls"],
                        "module":"text_check_udl",
                        "entry_class":"TextCheckUDL",
                        "model_name": "badmatr11x/distilroberta-base-offensive-hateful-speech-text-multiclassification",
                        "device": "cuda",
                        "max_exe_batch_size":10,
                        "batch_time_us":1000,
                        "max_emit_batch_size":10,
                        "next_udl_shards":[1]
                    }],
                "destinations": [{"/aggregate":"put"}]
            },
            {
                "pathname": "/lang_det",
                "shard_dispatcher_list": ["one"],
                "user_defined_logic_list": ["6cfe8f64-3a1d-11ed-8e7e-0242ac110006"],
                "user_defined_logic_stateful_list": ["singlethreaded"],
                "user_defined_logic_config_list": [
                    {
                        "python_path":["python_udls"],
                        "module":"lang_det_udl",
                        "entry_class":"LangDetUDL",
                        "model_name": "papluca/xlm-roberta-base-language-detection",
                        "device": "cuda",
                        "max_exe_batch_size":10,
                        "batch_time_us":1000,
                        "max_emit_batch_size":10,
                        "next_udl_shards":[1]
                    }],
                "destinations": [{"/aggregate":"put"}]
            },
            {
                "pathname": "/aggregate",
                "shard_dispatcher_list": ["one"],
                "user_defined_logic_list": ["6cfe8f64-3a1d-11ed-8e7e-0242ac110006"],
                "user_defined_logic_stateful_list": ["singlethreaded"],
                "user_defined_logic_config_list": [
                    {
                        "python_path":["python_udls"],
                        "module":"aggregate_udl",
                        "entry_class":"AggregateUDL",
                        "flush_qid":49
                    }],
                "destinations": [{}]
            }
        ]
    },
    {
        "id": "300000000-3ccc-12c3-3333-000000033333",
        "desc": "Logging purpose graph",
        "graph": [
            {
                "pathname": "/flush_log",
                "user_defined_logic_list": ["6cfe8f64-3a1d-11ed-8e7e-0242ac110006"],
                "user_defined_logic_stateful_list": ["singlethreaded"],
                "user_defined_logic_config_list": [
                    {
                        "python_path":["python_udls"],
                        "module":"flush_log_udl",
                        "entry_class":"FlushLogUDL"
                    }],
                "destinations": [{}]
            }
        ]
    }
]